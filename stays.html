<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stays</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+3">
</head>
<script type="text/javascript" src="js/scripts.js"></script>
<body onload="updateTime(), updateSlider(), checkCookie()">
<header>
    <h1>Stays</h1>
</header>
<nav>
    <ul id="navigation">
        <li><a class="navbar" href="home.html">Home</a></li>
        <li><a class="navbar" href="flights.html">Flights</a></li>
        <li><a class="navbar" href="cruises.html">Cruises</a></li>
        <li><a class="navbar" href="stays.html">Stays</a></li>
        <li><a class="navbar" href="cars.html">Cars</a></li>
        <li><a class="navbar" href="contact.html">Contact Us</a></li>
        <li><a class="navbar" href="cart.html">My Cart</a></li>
        <li><a id="loginButton" class="navbar" href="register.html">Log In</a></li>
    </ul>
</nav>
<div class="container">
    <aside>
        <h2>Sidebar</h2>
        <p id="datetime"></p>
        <div>
            <input type="range" min="8" max="96" value="16" class="slideBox" id="slideRange">
        </div>
        <p>Font size: <span id="fontSize"></span>px</p>
        <p>Background Color</p>
        <input id="colorPicker" type="color" value="#ff0000" style="width:70%;">
        <p id="bgtext">Background color: #FFFFFF</p>
        <br> <br>
        <p class="error" id="error"></p>
    </aside>
    <main>
        <h2>Select Booking Details</h2>
        <div id="bodyContent">
            <form>
                <table>
                    <tr>
                        <td>
                            <label for="city"> City </label>
                        </td>
                        <td>
                            <input type="text" id="city" placeholder="City in California or Texas">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="check-in"> Check-in Date </label>
                        </td>
                        <td>
                            <input type="date" id="check-in" size="3">
                        </td>
                        <td>
                            <label for="check-out"> Check-out Date </label>
                        </td>
                        <td>
                            <input type="date" id="check-out" size="3">
                        </td>
                    </tr>
                    <tr>
                    <tr>
                        <td>
                            <label for="rooms"> Number of Rooms </label>
                        </td>
                        <td>
                            <input type="text" id="rooms" size="5">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label> Number of Guests</label>
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="adult">Adults</label>
                            <input type="text" id="adult" size="5">
                        </td>
                        <td>
                            <label for="child">Children</label>
                            <input type="text" id="child" size="5">
                        </td>
                        <td>
                            <label for="infant">Infants</label>
                            <input type="text" id="infant" size="5">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button type="button" onclick="onSubmit()"
                                    style="font-size: 15px; padding: 5px"> Submit
                            </button>
                        </td>
                    </tr>
                </table>
            </form>
            <br><br>
            <h3>Guest Details</h3> <br>
            <p id="info"></p>

        </div>
    </main>
</div>
<footer>
    <p>&copy; 2024 Mega Vacation Deals</p>
</footer>
<script>

    function onSubmit() {
        const num_adult = parseInt(document.getElementById("adult").value);
        const city_name = document.getElementById("city").value.trim().toLowerCase();
        const num_rooms = parseInt(document.getElementById("rooms").value);
        const num_child = parseInt(document.getElementById("child").value);
        const num_infant = parseInt(document.getElementById("infant").value);
        const guest_count = num_adult + num_child;
        const city = ['austin', 'san francisco', 'houston', 'dallas', 'san antonio', 'los angeles', 'san diego'];
        let err_text = "";
        let norm_text = "";

        // Num of rooms constraint
        if (isNaN(num_rooms) || num_rooms < (guest_count / 2)) {
            err_text += "number of rooms selected cannot accommodate total guest count <br><br>";
        }
        // City should be in Texas or California
        if (!city_name || !city.includes(city_name)) {
            err_text += "City must be in Texas or California <br><br>";
        }


        // The user must enter check in date, and check out date anytime between
        // Sep 1 2024 to Dec 1st 2024.
        const checkIn = new Date(document.getElementById('check-in').value);
        const checkOut = new Date(document.getElementById('check-out').value)
        const minDate = new Date('2024-09-01');
        const maxDate = new Date('2024-12-01');

        if (checkOut <= checkIn || checkOut > maxDate || checkIn > maxDate || checkOut < minDate || checkIn < minDate
            || !document.getElementById('check-in').value || !document.getElementById('check-out').value) {
            err_text += "Check-in and Checkout dates must be between Sep 1 2024 to Dec 1st 2024<br><br>";
        }


        // Validating constraint
        if (err_text === "") {
            norm_text += "Staying in: " + city_name + "<br>";
            norm_text += "Number of Rooms selected: " + num_rooms + "<br>";
            norm_text += "Number of Guests: " + guest_count + "--" + "Adults: " + num_adult + ", Children: " + num_child
                + ", Infants: " + num_infant + ".<br><br>"
            norm_text += "Check-in Date: " + document.getElementById('check-in').value + "<br>";
            norm_text += "Check-out Date: " + document.getElementById('check-out').value + "<br>";
            document.getElementById("info").innerHTML = norm_text;
        } else {
            document.getElementById("error").innerHTML = err_text;
        }

    }
</script>
</body>
</html>
